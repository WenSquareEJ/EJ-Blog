(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[914],{4674:function(e,t,n){Promise.resolve().then(n.bind(n,6684))},6684:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var s=n(7437),a=n(2265),r=n(6463),l=n(7138),i=n(1180);function u(){let e=(0,r.useRouter)(),t=(0,i.V4)(),[n,u]=(0,a.useState)(""),[o,c]=(0,a.useState)(""),[d,h]=(0,a.useState)(!1),[m,f]=(0,a.useState)(null);async function p(s){s.preventDefault(),f(null),h(!0);try{let{data:s,error:a}=await t.auth.signInWithPassword({email:n,password:o});if(a){f(a.message);return}s.session&&await N("SIGNED_IN",s.session),e.push("/")}catch(e){var a;f(null!==(a=null==e?void 0:e.message)&&void 0!==a?a:"Something went wrong.")}finally{h(!1)}}async function N(e,t){try{let n=await fetch("/auth/callback",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({event:e,session:t})});n.ok||console.error("Failed to sync Supabase session",e,await n.text())}catch(e){console.error("Error syncing Supabase session",e)}}return(0,a.useEffect)(()=>{let{data:{subscription:n}}=t.auth.onAuthStateChange(async(t,n)=>{(function(e,t){if("SIGNED_OUT"===e||"USER_DELETED"===e)return!0;let n=!!((null==t?void 0:t.access_token)&&(null==t?void 0:t.refresh_token));return("SIGNED_IN"===e||"INITIAL_SESSION"===e||"TOKEN_REFRESHED"===e||"USER_UPDATED"===e)&&n})(t,n)&&await N(t,n),e.refresh()});return()=>n.unsubscribe()},[t,e]),(0,s.jsxs)("div",{className:"mx-auto max-w-md w-full p-4 sm:p-6 bg-white/70 rounded-lg shadow",children:[(0,s.jsx)("h1",{className:"text-xl font-semibold mb-4",children:"Log in"}),(0,s.jsxs)("form",{onSubmit:p,className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm mb-1",children:"Email"}),(0,s.jsx)("input",{type:"email",className:"w-full rounded border px-3 py-2",value:n,onChange:e=>u(e.target.value),autoComplete:"email",required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm mb-1",children:"Password"}),(0,s.jsx)("input",{type:"password",className:"w-full rounded border px-3 py-2",value:o,onChange:e=>c(e.target.value),autoComplete:"current-password",required:!0})]}),m&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:m}),(0,s.jsx)("button",{type:"submit",disabled:d,className:"btn-mc-secondary w-full",children:d?"Signing inâ€¦":"Sign in"})]}),(0,s.jsxs)("p",{className:"mt-4 text-xs opacity-80",children:["Don't have an account?"," ",(0,s.jsx)(l.default,{href:"/",className:"underline",children:"Go back"})]})]})}},1180:function(e,t,n){"use strict";n.d(t,{V4:function(){return l}});var s=n(5609),a=n(357);let r=null;function l(){return r||(r=(0,s.createBrowserClient)(a.env.NEXT_PUBLIC_SUPABASE_URL,a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY))}t.ZP=l},7138:function(e,t,n){"use strict";n.d(t,{default:function(){return a.a}});var s=n(231),a=n.n(s)}},function(e){e.O(0,[231,184,971,23,744],function(){return e(e.s=4674)}),_N_E=e.O()}]);